<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«éšœå®³ç‰©ã‚²ãƒ¼ãƒ </title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
        }
        
        h1 {
            color: white;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        #gameCanvas {
            border: 3px solid #333;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 100%);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border-radius: 10px;
        }
        
        .info {
            color: white;
            margin-top: 15px;
            font-size: 18px;
            text-align: center;
        }
        
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 30px 50px;
            border-radius: 15px;
            text-align: center;
            display: none;
            z-index: 100;
        }
        
        .game-over h2 {
            margin-top: 0;
            color: #ff6b6b;
        }
        
        .game-over button {
            margin-top: 20px;
            padding: 10px 30px;
            font-size: 18px;
            background: #4ecdc4;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .game-over button:hover {
            background: #45b7aa;
        }
        
        #container {
            position: relative;
        }
    </style>
</head>
<body>
    <h1>ğŸƒ æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«éšœå®³ç‰©ã‚²ãƒ¼ãƒ </h1>
    <div id="container">
        <canvas id="gameCanvas" width="800" height="400"></canvas>
        <div class="game-over" id="gameOver">
            <h2>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼</h2>
            <p>ã‚¹ã‚³ã‚¢: <span id="finalScore">0</span></p>
            <button onclick="restartGame()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
        </div>
    </div>
    <div class="info">
        <p>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã¾ãŸã¯ä¸ŠçŸ¢å°ã‚­ãƒ¼ã§ã‚¸ãƒ£ãƒ³ãƒ—</p>
        <p>ã‚¹ã‚³ã‚¢: <span id="score">0</span></p>
    </div>

    <script>
        // ============================================
        // ã‚²ãƒ¼ãƒ ã®åŸºæœ¬è¨­å®š
        // ============================================
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameOverDiv = document.getElementById('gameOver');
        const scoreElement = document.getElementById('score');
        const finalScoreElement = document.getElementById('finalScore');

        // ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹
        let gameRunning = true;
        let score = 0;
        let gameSpeed = 2;

        // ============================================
        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆäººé–“ï¼‰ã®è¨­å®š
        // ============================================
        const player = {
            x: 100,                    // Xåº§æ¨™ï¼ˆå·¦ã‹ã‚‰ã®ä½ç½®ï¼‰
            y: 300,                    // Yåº§æ¨™ï¼ˆä¸Šã‹ã‚‰ã®ä½ç½®ï¼‰
            width: 40,                 // å¹…
            height: 40,                // é«˜ã•
            velocityY: 0,              // Yæ–¹å‘ã®é€Ÿåº¦
            jumpPower: -18,            // ã‚¸ãƒ£ãƒ³ãƒ—ã®å¼·ã•ï¼ˆãµã‚“ã‚ã‚Šè·³ã¶ãŸã‚ã«ä¸Šã’ã‚‹ï¼‰
            gravity: 0.6,              // é‡åŠ›ï¼ˆãµã‚“ã‚ã‚Šè·³ã¶ãŸã‚ã«ä¸‹ã’ã‚‹ï¼‰
            onGround: false,           // åœ°é¢ã«ã„ã‚‹ã‹ã©ã†ã‹
            groundY: 300,              // åœ°é¢ã®Yåº§æ¨™
            jumpCount: 0,              // ã‚¸ãƒ£ãƒ³ãƒ—å›æ•°ï¼ˆäºŒæ®µã‚¸ãƒ£ãƒ³ãƒ—ç”¨ï¼‰
            maxJumps: 2,               // æœ€å¤§ã‚¸ãƒ£ãƒ³ãƒ—å›æ•°
            rotation: 0,               // å›è»¢è§’åº¦ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
            scale: 1,                  // ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
            lastY: 300                 // å‰ãƒ•ãƒ¬ãƒ¼ãƒ ã®Yåº§æ¨™ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
        };

        // ============================================
        // éšœå®³ç‰©ã®é…åˆ—
        // ============================================
        let obstacles = [];
        let obstacleTimer = 0;
        const obstacleInterval = 120;  // éšœå®³ç‰©ã‚’ç”Ÿæˆã™ã‚‹é–“éš”ï¼ˆãƒ•ãƒ¬ãƒ¼ãƒ æ•°ï¼‰
        
        // ============================================
        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®é…åˆ—
        // ============================================
        let particles = [];

        // ============================================
        // åœ°é¢ã®æç”»
        // ============================================
        function drawGround() {
            ctx.fillStyle = '#8B4513';  // èŒ¶è‰²
            ctx.fillRect(0, player.groundY + player.height, canvas.width, canvas.height - (player.groundY + player.height));
            
            // è‰ã®æç”»
            ctx.fillStyle = '#228B22';
            for (let i = 0; i < canvas.width; i += 20) {
                ctx.fillRect(i, player.groundY + player.height, 2, 10);
            }
        }

        // ============================================
        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆäººé–“ï¼‰ã®æç”»ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
        // ============================================
        function drawPlayer() {
            // å›è»¢ã¨ã‚¹ã‚±ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹ãŸã‚ã«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¿å­˜
            ctx.save();
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ä¸­å¿ƒç‚¹ã‚’è¨ˆç®—
            const centerX = player.x + player.width / 2;
            const centerY = player.y + player.height / 2;
            
            // å›è»¢ã¨ã‚¹ã‚±ãƒ¼ãƒ«ã®ä¸­å¿ƒç‚¹ã‚’è¨­å®š
            ctx.translate(centerX, centerY);
            ctx.rotate(player.rotation);
            ctx.scale(player.scale, player.scale);
            ctx.translate(-centerX, -centerY);
            
            // é ­ï¼ˆå††å½¢ï¼‰
            ctx.fillStyle = '#FFDBAC';  // è‚Œè‰²
            ctx.beginPath();
            ctx.arc(centerX, player.y + 8, 10, 0, 2 * Math.PI);
            ctx.fill();
            
            // é¡”ã®è¼ªéƒ­
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.arc(centerX, player.y + 8, 10, 0, 2 * Math.PI);
            ctx.stroke();
            
            // ç›®ï¼ˆ2ã¤ï¼‰
            ctx.fillStyle = '#000000';  // é»’
            ctx.beginPath();
            ctx.arc(centerX - 4, player.y + 6, 2, 0, 2 * Math.PI);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(centerX + 4, player.y + 6, 2, 0, 2 * Math.PI);
            ctx.fill();
            
            // å£
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.arc(centerX, player.y + 10, 3, 0, Math.PI);
            ctx.stroke();
            
            // ä½“ï¼ˆèƒ´ä½“ï¼‰
            ctx.fillStyle = '#4169E1';  // é’ã„ã‚·ãƒ£ãƒ„
            ctx.fillRect(centerX - 8, player.y + 18, 16, 12);
            
            // è…•ï¼ˆå·¦ï¼‰
            ctx.fillStyle = '#FFDBAC';  // è‚Œè‰²
            ctx.fillRect(centerX - 12, player.y + 20, 4, 10);
            // è…•ï¼ˆå³ï¼‰
            ctx.fillRect(centerX + 8, player.y + 20, 4, 10);
            
            // è¶³ï¼ˆå·¦ï¼‰
            ctx.fillStyle = '#000000';  // é»’ã„ã‚ºãƒœãƒ³
            ctx.fillRect(centerX - 8, player.y + 30, 6, 10);
            // è¶³ï¼ˆå³ï¼‰
            ctx.fillRect(centerX + 2, player.y + 30, 6, 10);
            
            // ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å¾©å…ƒ
            ctx.restore();
        }
        
        // ============================================
        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æç”»
        // ============================================
        function drawParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                ctx.fillStyle = `rgba(65, 105, 225, ${p.alpha})`;  // é’ã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, 2 * Math.PI);
                ctx.fill();
                
                // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æ›´æ–°
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.2;  // é‡åŠ›
                p.alpha -= 0.02;
                p.size *= 0.98;
                
                // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒæ¶ˆãˆãŸã‚‰å‰Šé™¤
                if (p.alpha <= 0 || p.size <= 0) {
                    particles.splice(i, 1);
                }
            }
        }
        
        // ============================================
        // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®ç”Ÿæˆï¼ˆã‚¸ãƒ£ãƒ³ãƒ—æ™‚ï¼‰
        // ============================================
        function createJumpParticles() {
            const centerX = player.x + player.width / 2;
            const centerY = player.y + player.height;
            
            for (let i = 0; i < 8; i++) {
                particles.push({
                    x: centerX,
                    y: centerY,
                    vx: (Math.random() - 0.5) * 4,
                    vy: -Math.random() * 3 - 1,
                    size: Math.random() * 3 + 2,
                    alpha: 1
                });
            }
        }

        // ============================================
        // éšœå®³ç‰©ã®æç”»
        // ============================================
        function drawObstacle(obstacle) {
            ctx.fillStyle = '#8B0000';  // æ¿ƒã„èµ¤
            ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            
            // éšœå®³ç‰©ã«æ¨¡æ§˜ã‚’è¿½åŠ 
            ctx.fillStyle = '#FF0000';
            ctx.fillRect(obstacle.x + 5, obstacle.y + 5, obstacle.width - 10, obstacle.height - 10);
        }

        // ============================================
        // éšœå®³ç‰©ã®ç”Ÿæˆ
        // ============================================
        function createObstacle() {
            const obstacleHeight = 30;  // éšœå®³ç‰©ã®é«˜ã•ã‚’30ã«å¤‰æ›´
            obstacles.push({
                x: canvas.width,                    // ç”»é¢ã®å³ç«¯ã‹ã‚‰é–‹å§‹
                y: player.groundY + player.height - obstacleHeight,  // åœ°é¢ã®ä¸Šï¼ˆåº•ãŒåœ°é¢ã®ä¸Šç«¯ã«æ¥ã‚‹ï¼‰
                width: 30,                          // å¹…
                height: obstacleHeight              // é«˜ã•
            });
        }

        // ============================================
        // è¡çªåˆ¤å®š
        // ============================================
        function checkCollision(player, obstacle) {
            return player.x < obstacle.x + obstacle.width &&
                   player.x + player.width > obstacle.x &&
                   player.y < obstacle.y + obstacle.height &&
                   player.y + player.height > obstacle.y;
        }

        // ============================================
        // ã‚²ãƒ¼ãƒ ã®æ›´æ–°å‡¦ç†
        // ============================================
        function update() {
            if (!gameRunning) return;

            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç‰©ç†æ¼”ç®—
            player.velocityY += player.gravity;  // é‡åŠ›ã‚’é©ç”¨
            player.y += player.velocityY;       // Yåº§æ¨™ã‚’æ›´æ–°

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šå›è»¢ã¨ã‚¹ã‚±ãƒ¼ãƒ«ã®æ›´æ–°
            if (!player.onGround) {
                // ç©ºä¸­ã«ã„ã‚‹æ™‚ï¼šå›è»¢ï¼ˆè½ä¸‹é€Ÿåº¦ã«å¿œã˜ã¦ï¼‰
                player.rotation += player.velocityY * 0.02;
                // ã‚¹ã‚±ãƒ¼ãƒ«ï¼šã‚¸ãƒ£ãƒ³ãƒ—æ™‚ã¯å°‘ã—ç¸®ã‚€
                if (player.velocityY < 0) {
                    player.scale = Math.max(0.9, 1 + player.velocityY * 0.01);
                } else {
                    player.scale = Math.min(1.1, 1 - player.velocityY * 0.01);
                }
            } else {
                // åœ°é¢ã«ã„ã‚‹æ™‚ï¼šå›è»¢ã‚’ãƒªã‚»ãƒƒãƒˆ
                player.rotation *= 0.9;  // æ»‘ã‚‰ã‹ã«ãƒªã‚»ãƒƒãƒˆ
                // ã‚¹ã‚±ãƒ¼ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆç€åœ°æ™‚ã®ãƒã‚¦ãƒ³ã‚¹åŠ¹æœï¼‰
                if (Math.abs(player.rotation) > 0.1) {
                    player.scale = 0.95 + Math.abs(player.rotation) * 0.1;
                } else {
                    player.scale = 1;
                }
            }

            // åœ°é¢ã¨ã®è¡çªåˆ¤å®š
            const wasInAir = !player.onGround;
            if (player.y >= player.groundY) {
                player.y = player.groundY;
                player.velocityY = 0;
                player.onGround = true;
                player.jumpCount = 0;  // åœ°é¢ã«ç€åœ°ã—ãŸã‚‰ã‚¸ãƒ£ãƒ³ãƒ—å›æ•°ã‚’ãƒªã‚»ãƒƒãƒˆ
                
                // ç€åœ°æ™‚ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                if (wasInAir) {
                    createJumpParticles();
                }
            } else {
                player.onGround = false;
            }
            
            // å‰ãƒ•ãƒ¬ãƒ¼ãƒ ã®Yåº§æ¨™ã‚’ä¿å­˜
            player.lastY = player.y;

            // éšœå®³ç‰©ã®ç”Ÿæˆ
            obstacleTimer++;
            if (obstacleTimer >= obstacleInterval) {
                createObstacle();
                obstacleTimer = 0;
            }

            // éšœå®³ç‰©ã®æ›´æ–°
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].x -= gameSpeed;  // å·¦ã«ç§»å‹•

                // è¡çªåˆ¤å®š
                if (checkCollision(player, obstacles[i])) {
                    gameOver();
                    return;
                }

                // ç”»é¢å¤–ã«å‡ºãŸéšœå®³ç‰©ã‚’å‰Šé™¤
                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                    score += 10;  // ã‚¹ã‚³ã‚¢åŠ ç®—
                    scoreElement.textContent = score;
                    
                    // ã‚¹ã‚³ã‚¢ã«å¿œã˜ã¦ã‚²ãƒ¼ãƒ é€Ÿåº¦ã‚’ä¸Šã’ã‚‹
                    if (score % 100 === 0 && score > 0) {
                        gameSpeed += 0.5;
                    }
                }
            }
        }

        // ============================================
        // ã‚²ãƒ¼ãƒ ã®æç”»å‡¦ç†
        // ============================================
        function draw() {
            // èƒŒæ™¯ã‚’ã‚¯ãƒªã‚¢
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // é›²ã®æç”»ï¼ˆèƒŒæ™¯è£…é£¾ï¼‰
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.beginPath();
            ctx.arc(100, 80, 30, 0, 2 * Math.PI);
            ctx.arc(120, 80, 35, 0, 2 * Math.PI);
            ctx.arc(140, 80, 30, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(600, 60, 25, 0, 2 * Math.PI);
            ctx.arc(615, 60, 30, 0, 2 * Math.PI);
            ctx.arc(630, 60, 25, 0, 2 * Math.PI);
            ctx.fill();

            // åœ°é¢ã®æç”»
            drawGround();
            
            // éšœå®³ç‰©ã®æç”»
            obstacles.forEach(drawObstacle);
            
            // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã®æç”»
            drawParticles();
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æç”»
            drawPlayer();
        }

        // ============================================
        // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
        // ============================================
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // ============================================
        // åŠ¹æœéŸ³ã®ç”Ÿæˆï¼ˆWeb Audio APIä½¿ç”¨ï¼‰
        // ============================================
        function playJumpSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                // éŸ³ã®è¨­å®š
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // ã‚¸ãƒ£ãƒ³ãƒ—éŸ³ï¼šçŸ­ãé«˜ã„éŸ³
                oscillator.frequency.value = 600;  // å‘¨æ³¢æ•°ï¼ˆHzï¼‰
                oscillator.type = 'sine';  // ã‚µã‚¤ãƒ³æ³¢
                
                // éŸ³é‡ã®ã‚¨ãƒ³ãƒ™ãƒ­ãƒ¼ãƒ—ï¼ˆãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆï¼‰
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                // éŸ³ã‚’å†ç”Ÿ
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);  // 0.1ç§’ã§åœæ­¢
            } catch (error) {
                // éŸ³å£°ãŒå†ç”Ÿã§ããªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–
                console.log('éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        // ============================================
        // ã‚¸ãƒ£ãƒ³ãƒ—å‡¦ç†ï¼ˆäºŒæ®µã‚¸ãƒ£ãƒ³ãƒ—å¯¾å¿œï¼‰
        // ============================================
        function jump() {
            if (!gameRunning) return;
            
            // ã‚¸ãƒ£ãƒ³ãƒ—å›æ•°ãŒæœ€å¤§å€¤æœªæº€ã®å ´åˆã®ã¿ã‚¸ãƒ£ãƒ³ãƒ—å¯èƒ½
            if (player.jumpCount < player.maxJumps) {
                player.velocityY = player.jumpPower;
                player.jumpCount++;  // ã‚¸ãƒ£ãƒ³ãƒ—å›æ•°ã‚’å¢—ã‚„ã™
                player.onGround = false;
                
                // ã‚¸ãƒ£ãƒ³ãƒ—æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                player.rotation = -0.3;  // ã‚¸ãƒ£ãƒ³ãƒ—æ™‚ã«å°‘ã—å›è»¢
                player.scale = 0.9;      // ã‚¸ãƒ£ãƒ³ãƒ—æ™‚ã«å°‘ã—ç¸®ã‚€
                
                // ã‚¸ãƒ£ãƒ³ãƒ—æ™‚ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                createJumpParticles();
                
                playJumpSound();  // ã‚¸ãƒ£ãƒ³ãƒ—åŠ¹æœéŸ³ã‚’å†ç”Ÿ
            }
        }

        // ============================================
        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã®å‡¦ç†
        // ============================================
        document.addEventListener('keydown', function(event) {
            if (event.code === 'Space' || event.code === 'ArrowUp') {
                event.preventDefault();
                jump();
            }
        });

        // ============================================
        // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼å‡¦ç†
        // ============================================
        function gameOver() {
            gameRunning = false;
            finalScoreElement.textContent = score;
            gameOverDiv.style.display = 'block';
        }

        // ============================================
        // ã‚²ãƒ¼ãƒ ã®å†é–‹å‡¦ç†
        // ============================================
        function restartGame() {
            // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
            gameRunning = true;
            score = 0;
            gameSpeed = 2;
            obstacles = [];
            obstacleTimer = 0;
            
            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
            player.x = 100;
            player.y = player.groundY;
            player.velocityY = 0;
            player.onGround = true;
            player.jumpCount = 0;  // ã‚¸ãƒ£ãƒ³ãƒ—å›æ•°ã‚‚ãƒªã‚»ãƒƒãƒˆ
            player.rotation = 0;   // å›è»¢ã‚’ãƒªã‚»ãƒƒãƒˆ
            player.scale = 1;      // ã‚¹ã‚±ãƒ¼ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
            player.lastY = player.groundY;  // å‰ãƒ•ãƒ¬ãƒ¼ãƒ ã®Yåº§æ¨™ã‚’ãƒªã‚»ãƒƒãƒˆ
            
            // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚’ã‚¯ãƒªã‚¢
            particles = [];
            
            // UIã‚’ãƒªã‚»ãƒƒãƒˆ
            scoreElement.textContent = score;
            gameOverDiv.style.display = 'none';
        }

        // ============================================
        // ã‚²ãƒ¼ãƒ é–‹å§‹
        // ============================================
        gameLoop();
    </script>
</body>
</html>
